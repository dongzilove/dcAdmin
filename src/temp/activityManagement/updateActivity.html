<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>表单</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">

		<link rel="stylesheet" href="../../plugins/layui/css/layui.css" media="all" />
		<link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
	</head>

	<body>
		<div style="margin: 15px;">
			<form class="layui-form" action="">
				<div class="layui-form-item">
					<label class="layui-form-label">活动标题</label>
					<div class="layui-input-block">
						<input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入活动标题" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label">活动对象</label>
					<div class="layui-input-block">
						<input type="text" name="object" lay-verify="object" autocomplete="off" placeholder="请输入活动对象" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label">活动内容</label>
					<div class="layui-input-block">
						<input type="text" name="content" lay-verify="content" autocomplete="off" placeholder="请输入活动内容" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
			      <label class="layui-form-label">活动时间</label>
			      <div class="layui-input-inline">
			        <input type="text" class="layui-input" id="test10" placeholder=" - ">
			      </div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label">排序</label>
					<div class="layui-input-block">
						<input type="text" name="sort" lay-verify="sort" autocomplete="off" placeholder="请输入序号" class="layui-input">
					</div>
				</div>
				<div class="layui-upload">
					<div class="layui-form-item">
						<label class="layui-form-label">PC轮播图</label>
						<div class="layui-input-block">
							<div class="layui-upload">
							  <p style="float: left;position: absolute;left: 10%;" id="demoText"></p>
							  <button type="button" class="layui-btn" id="test1">上传图片</button>
							  
							  <div class="layui-upload-list">
							    <img class="layui-upload-img" id="demo1">
							  </div>
							</div>  
						</div>
					</div>
				</div> 
				<div class="layui-upload">
					<div class="layui-form-item">
						<label class="layui-form-label">PC简介图</label>
						<div class="layui-input-block">
							<div class="layui-upload">
							  <p style="float: left;position: absolute;left: 10%;" id="demoText1"></p>
							  <button type="button" class="layui-btn" id="test2">上传图片</button>
							  
							  <div class="layui-upload-list">
							    <img class="layui-upload-img" id="demo2">
							  </div>
							</div>  
						</div>
					</div>
				</div> 
				<div class="layui-upload">
					<div class="layui-form-item">
						<label class="layui-form-label">PC活动图</label>
						<div class="layui-input-block">
							<div class="layui-upload">
							  <p style="float: left;position: absolute;left: 10%;" id="demoText2"></p>
							  <button type="button" class="layui-btn" id="test3">上传图片</button>
							  
							  <div class="layui-upload-list">
							    <img class="layui-upload-img" id="demo3">
							  </div>
							</div>  
						</div>
					</div>
				</div> 
				<div class="layui-upload">
					<div class="layui-form-item">
						<label class="layui-form-label">手机轮播图</label>
						<div class="layui-input-block">
							<div class="layui-upload">
							  <p style="float: left;position: absolute;left: 10%;" id="demoText3"></p>
							  <button type="button" class="layui-btn" id="test4">上传图片</button>
							  
							  <div class="layui-upload-list">
							    <img class="layui-upload-img" id="demo4">
							  </div>
							</div>  
						</div>
					</div>
				</div> 
				<div class="layui-upload">
					<div class="layui-form-item">
						<label class="layui-form-label">手机简介图</label>
						<div class="layui-input-block">
							<div class="layui-upload">
							  <p style="float: left;position: absolute;left: 10%;" id="demoText4"></p>
							  <button type="button" class="layui-btn" id="test5">上传图片</button>
							  
							  <div class="layui-upload-list">
							    <img class="layui-upload-img" id="demo5">
							  </div>
							</div>  
						</div>
					</div>
				</div> 
				<div class="layui-upload">
					<div class="layui-form-item">
						<label class="layui-form-label">手机活动图</label>
						<div class="layui-input-block">
							<div class="layui-upload">
							  <p style="float: left;position: absolute;left: 10%;" id="demoText5"></p>
							  <button type="button" class="layui-btn" id="test6">上传图片</button>
							  
							  <div class="layui-upload-list">
							    <img class="layui-upload-img" id="demo6">
							  </div>
							</div>  
						</div>
					</div>
				</div> 

				<div class="layui-form-item">
					<div class="layui-input-block" style="margin-top: 35px;margin-left: 40%;">
						<button class="layui-btn layui-btn-btnnew" lay-submit="" lay-filter="addAdmin">立即提交</button>
						<button type="reset" class="layui-btn layui-btn-primary">重置</button>
					</div>
				</div>
			</form>
		</div>
		<script type="text/javascript" src="../../plugins/layui/layui.js"></script>
		<script>
			layui.use(['form', 'layedit', 'laydate','upload'], function() {
				var form = layui.form,
					layer = layui.layer,
					layedit = layui.layedit,
					laydate = layui.laydate
					  ,$ = layui.jquery
					  ,upload = layui.upload;
				//日期时间范围
				  laydate.render({
				    elem: '#test10'
				    ,type: 'datetime'
				    ,range: true
				  });
				//创建一个编辑器
				var editIndex = layedit.build('LAY_demo_editor');
				//自定义验证规则
				form.verify({
					userName: function(value) {
						if(value.length < 5) {
							return '用户名长度4-21个字符不能为空且不能为纯数字!';
						}
					},
					pass: [/(.+){6,12}$/, '密码必须6到12位'],
					content: function(value) {
						layedit.sync(editIndex);
					},
					zubie:function(value){
						if(value.length <= 0) {
							return '所属组别不能为空';
						}
					}
				});

				//监听提交
				form.on('submit(addAdmin)', function(data) {
					layer.msg('添加成功！', {
				  		offset: 't',
					  	anim: 1
					});
					window.parent.location.reload();
					layer.closeAll('iframe'); //关闭弹出层
					
					return false;
				});
				
  
			  //普通图片上传1
			  var uploadInst = upload.render({
			    elem: '#test1'
			    ,url: '/upload/'
			    ,before: function(obj){
			      //预读本地文件示例，不支持ie8
			      obj.preview(function(index, file, result){
			        $('#demo1').attr('src', result); //图片链接（base64）
			      });
			    }
			    ,done: function(res){
			      //如果上传失败
			      if(res.code > 0){
			        return layer.msg('上传失败');
			      }
			      //上传成功
			    }
			    ,error: function(){
			      //演示失败状态，并实现重传
			      var demoText = $('#demoText');
			      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
			      demoText.find('.demo-reload').on('click', function(){
			        uploadInst.upload();
			      });
			    }
			  });
			  //普通图片上传2
			  var uploadInst = upload.render({
			    elem: '#test2'
			    ,url: '/upload/'
			    ,before: function(obj){
			      //预读本地文件示例，不支持ie8
			      obj.preview(function(index, file, result){
			        $('#demo2').attr('src', result); //图片链接（base64）
			      });
			    }
			    ,done: function(res){
			      //如果上传失败
			      if(res.code > 0){
			        return layer.msg('上传失败');
			      }
			      //上传成功
			    }
			    ,error: function(){
			      //演示失败状态，并实现重传
			      var demoText = $('#demoText1');
			      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
			      demoText.find('.demo-reload').on('click', function(){
			        uploadInst.upload();
			      });
			    }
			  });
			  //普通图片上传3
			  var uploadInst = upload.render({
			    elem: '#test3'
			    ,url: '/upload/'
			    ,before: function(obj){
			      //预读本地文件示例，不支持ie8
			      obj.preview(function(index, file, result){
			        $('#demo3').attr('src', result); //图片链接（base64）
			      });
			    }
			    ,done: function(res){
			      //如果上传失败
			      if(res.code > 0){
			        return layer.msg('上传失败');
			      }
			      //上传成功
			    }
			    ,error: function(){
			      //演示失败状态，并实现重传
			      var demoText = $('#demoText2');
			      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
			      demoText.find('.demo-reload').on('click', function(){
			        uploadInst.upload();
			      });
			    }
			  });
			  //普通图片上传4
			  var uploadInst = upload.render({
			    elem: '#test4'
			    ,url: '/upload/'
			    ,before: function(obj){
			      //预读本地文件示例，不支持ie8
			      obj.preview(function(index, file, result){
			        $('#demo4').attr('src', result); //图片链接（base64）
			      });
			    }
			    ,done: function(res){
			      //如果上传失败
			      if(res.code > 0){
			        return layer.msg('上传失败');
			      }
			      //上传成功
			    }
			    ,error: function(){
			      //演示失败状态，并实现重传
			      var demoText = $('#demoText3');
			      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
			      demoText.find('.demo-reload').on('click', function(){
			        uploadInst.upload();
			      });
			    }
			  });
			  //普通图片上传5
			  var uploadInst = upload.render({
			    elem: '#test5'
			    ,url: '/upload/'
			    ,before: function(obj){
			      //预读本地文件示例，不支持ie8
			      obj.preview(function(index, file, result){
			        $('#demo5').attr('src', result); //图片链接（base64）
			      });
			    }
			    ,done: function(res){
			      //如果上传失败
			      if(res.code > 0){
			        return layer.msg('上传失败');
			      }
			      //上传成功
			    }
			    ,error: function(){
			      //演示失败状态，并实现重传
			      var demoText = $('#demoText4');
			      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
			      demoText.find('.demo-reload').on('click', function(){
			        uploadInst.upload();
			      });
			    }
			  });
			  //普通图片上传6
			  var uploadInst = upload.render({
			    elem: '#test6'
			    ,url: '/upload/'
			    ,before: function(obj){
			      //预读本地文件示例，不支持ie8
			      obj.preview(function(index, file, result){
			        $('#demo6').attr('src', result); //图片链接（base64）
			      });
			    }
			    ,done: function(res){
			      //如果上传失败
			      if(res.code > 0){
			        return layer.msg('上传失败');
			      }
			      //上传成功
			    }
			    ,error: function(){
			      //演示失败状态，并实现重传
			      var demoText = $('#demoText5');
			      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
			      demoText.find('.demo-reload').on('click', function(){
			        uploadInst.upload();
			      });
			    }
			  });
			});
		</script>
	</body>

</html>